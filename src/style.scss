@media (prefers-color-scheme: dark) {
    :root {
        color-scheme: dark;
        --fg: #fff;
        --bg: #222;
        --hi: #ff0;

        @media (prefers-contrast: more) {
            --bg: #000;
        }

        @media (prefers-contrast: less) {
            --fg: #ddd;
            --bg: #333;
            --hi: #ee2;
        }
    }
}

@media (prefers-color-scheme: light) {
    :root {
        color-scheme: light;
        --fg: #000;
        --bg: #ddd;
        --hi: #a00;

        @media (prefers-contrast: more) {
            --bg: #fff;
        }

        @media (prefers-contrast: less) {
            --fg: #222;
            --bg: #ccc;
            --hi: #911;
        }
    }
}

@media (pointer: coarse) {
    :is(ul, ol)>li:has(a:only-child) {
        margin: 1.5ex 0;
    }
}

li::marker {
    content: "â€” ";
}

:root {
    display: flex;
    justify-content: center;
    font-family: sans-serif;
    color: var(--fg);
    background-color: var(--bg);
}

a {
    color: inherit;
    text-decoration: none;
}

body {
    margin: 3.3em 1em;
    display: grid;
    grid-template-rows: auto auto auto;
    grid-template-areas: "header" "nav" "main";

    >header {
        grid-area: header;
        margin-bottom: 2ex;
    }

    >nav {
        margin-left: 2ex;
        grid-area: nav;
        display: grid;
        grid-auto-flow: column;
        width: max-content;
        gap: 2em;
        margin-bottom: 2ex;

        >* {
            display: block;
        }
    }

    >main {
        grid-area: main;
        display: grid;

        $layout-cutoff: 120ch;

        @media (width > $layout-cutoff) {
            grid-template:
                "outline content padding" auto / 1.5fr 4fr 1fr;

            >#outline {
                max-width: 40ch;
                padding-right: 2.5ex;
                margin-right: 2.5ex;
                border-right: var(--fg) solid 1px;
            }
        }

        @media (width <=$layout-cutoff) {
            grid-template: "outline" auto "content" auto / minmax(auto, 80ch);

            >#outline {
                max-height: 7em;
                overflow-y: scroll;
                border-bottom: var(--fg) solid 1px;
            }
        }

        >#outline {
            grid-area: outline;
        }

        >article {
            grid-area: content;
            max-width: 100ch;

            a {
                color: var(--hi);
                text-decoration: underline currentColor;
            }
        }
    }
}
